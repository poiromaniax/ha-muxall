<?xml version="1.1"?>
<!-- NOTE: Any NULL bytes in requests and responses are preserved within this output, even though this strictly breaks the XML syntax. If your XML parser rejects the NULL bytes then you will need to remove or replace these bytes before parsing. Alternatively, you can use the option to base64-encode requests and responses. -->
<!DOCTYPE items [
<!ELEMENT items (item*)>
<!ATTLIST items burpVersion CDATA "">
<!ATTLIST items exportTime CDATA "">
<!ELEMENT item (time, url, host, port, protocol, method, path, extension, request, status, responselength, mimetype, response, comment)>
<!ELEMENT time (#PCDATA)>
<!ELEMENT url (#PCDATA)>
<!ELEMENT host (#PCDATA)>
<!ATTLIST host ip CDATA "">
<!ELEMENT port (#PCDATA)>
<!ELEMENT protocol (#PCDATA)>
<!ELEMENT method (#PCDATA)>
<!ELEMENT path (#PCDATA)>
<!ELEMENT extension (#PCDATA)>
<!ELEMENT request (#PCDATA)>
<!ATTLIST request base64 (true|false) "false">
<!ELEMENT status (#PCDATA)>
<!ELEMENT responselength (#PCDATA)>
<!ELEMENT mimetype (#PCDATA)>
<!ELEMENT response (#PCDATA)>
<!ATTLIST response base64 (true|false) "false">
<!ELEMENT comment (#PCDATA)>
]>
<items burpVersion="2025.6.5" exportTime="Tue Jul 22 10:31:16 IDT 2025">
  <item>
    <time>Tue Jul 22 10:25:16 IDT 2025</time>
    <url><![CDATA[http://192.168.0.9/]]></url>
    <host ip="192.168.0.9">192.168.0.9</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/]]></path>
    <extension>null</extension>
    <request base64="false"><![CDATA[GET / HTTP/1.1
Host: 192.168.0.9
Accept-Language: en-US,en;q=0.9
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
Sec-Purpose: prefetch;prerender
Purpose: prefetch
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Accept-Encoding: gzip, deflate, br
Connection: keep-alive

]]></request>
    <status>200</status>
    <responselength>5136</responselength>
    <mimetype>HTML</mimetype>
    <response base64="false"><![CDATA[HTTP/1.1 200 OK
Content-Length: 4978
Content-Type: text/html
Content-Disposition: inline; filename="index.html"
Connection: close
Accept-Ranges: none

<!DOCTYPE html>
<!-- <html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"> -->
<head>
<meta charset="UTF-8">

<title>BBQ Controller</title>

<link rel="stylesheet" type="text/css" href="style.css">
<link rel="stylesheet" type="text/css" href="jquery-ui.css">
<style>
	#dialog label, #dialog input { display:block; }
	#dialog label { margin-top: 0.5em; }
	#dialog input, #dialog textarea { width: 95%; }
	#tabs { margin-top: 1em; }
	#tabs li .ui-icon-close { float: left; margin: 0.4em 0.2em 0 0; cursor: pointer; }
	#add_tab { cursor: pointer; }
	.ui-menu { width: 200px; }
	.ui-widget-header { padding: 0.2em; }
</style>

<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="jquery-ui.js"></script>
<script type="text/javascript" src="libtools.js"></script>
<script type="text/javascript">

	$(document).ready(function(){
		$(this).scrollTop(0);
		//------------------GLOBAL VARS ------------------------------------------------//		
	
		var tabTitle = $( "#tab_title" );
		var	tabTemplate = "<li><a href='#{href}'>#{label}</a> <span class='ui-icon ui-icon-close' role='presentation'>Remove Tab</span></li>";
		var	tabCounter = 2;
		

		var tabs = $( "#tabs" ).tabs();
	
		var menu = $( "#menu" ).menu({
		 	items: "> :not(.ui-widget-header)",
		 	select: function( event, ui ) {}
		 });

		// modal dialog init: custom buttons and a "close" callback resetting the form inside
		var dialog = $( "#dialog" ).dialog({
			autoOpen: false,
			modal: true,	//greys out background when dialog opens.
			buttons: {
				Cancel: function() {
					$( this ).dialog( "close" );
				}
			},
			close: function() {
				//form[ 0 ].reset();	//Not sure what this is
			}
		});

//------------------EVENT LISTENERS ------------------------------------------------//		
		
		// addTab button: just opens the dialog
		$( "#add_tab" ).button().click(function() {
			if (sessionStorage.getItem("clientState") < REGISTER){
			console.log("clientState = " + sessionStorage.getItem("clientState"));
				alert("Please Login");
				return;
			}
			dialog.dialog( "open" );
		});
		
		$( "#btnHelp" ).button().click(function() {
			window.open("https://muxall.com/docs/MuxallProBBQControllerUsersManual_v3.pdf", '_blank');
			event.preventDefault();
		});

		//dialog menu select EVENT
		menu.on( "menuselect", function( event, ui ) {
			//alert('menuselect event received.');
			var device = ui.item.attr("value");
			var app = ui.item.text();
			addTab(device,app);
			dialog.dialog( "close" );
			tabs.tabs( "option", "active", -1 );
			event.preventDefault();	
		});
		
		// close icon: removing the tab on click
		tabs.delegate( "span.ui-icon-close", "click", function() {
			var panelId = $( this ).closest( "li" ).remove().attr( "aria-controls" );
			$( "#" + panelId ).remove();
			tabs.tabs( "refresh" );
		});
		
		tabs.bind( "keyup", function( event ) {
				if ( event.altKey && event.keyCode === $.ui.keyCode.BACKSPACE ) {
					var panelId = tabs.find( ".ui-tabs-active" ).remove().attr( "aria-controls" );
					$( "#" + panelId ).remove();
					tabs.tabs( "refresh" );
				}
			});
		
		// addTab form: calls addTab function on submit and closes the dialog
		//var form = dialog.find( "form" ).submit(function( event ) {
			//addTab();
			//dialog.dialog( "close" );
			//event.preventDefault();
		//});
		
		//---------------------------FUNCTIONS ------------------------------------------------//	
		
		// actual addTab function: adds new tab using the input from the form above
		function addTab(device,app) {
			var tabContentHtml = "";
			var label = device + "-" + app;
			var id = "tabs-" + tabCounter;
			var li = $( tabTemplate.replace( /#\{href\}/g, "#" + id ).replace( /#\{label\}/g, label ) );
			tabContentHtml = '<iframe src="'+ app + '.html" width="100%" height="2350" >' + 
												'<p>Your browser does not support iframes.</p></iframe>';		
			tabs.find( ".ui-tabs-nav" ).append( li );
			tabs.append( "<div id='" + id + "'>" + tabContentHtml + "</div>" );
			tabs.tabs( "refresh" );		
			tabCounter++;
		}

	});
</script>
</head>
<!-------------------------------BODY ------------------------------------------------>	
<body>
	<div id="dialog" title="Controller Menu">
		<form>
			<fieldset class="ui-helper-reset">
				<ul id="menu">
					<li class="ui-widget-header">BBQ</li>
					<li value="bbq" >graph</li>
					<li value="bbq">config</li>
					<li value="bbq">update</li>
				</ul>
			</fieldset>
		</form>
	</div>
	<button id="add_tab">Add Tab</button>
	<button id="btnHelp" style='float: right;'>Help</button>
	<div id="tabs">
		<ul>
			<li><a href="#tabs-1">Control</a></li>
		</ul>
		<div id="tabs-1">
			<iframe src="control.html" width="100%" height="2200" >
				<p>Your browser does not support iframes.</p>
			</iframe>
		</div>
	</div>
</body>
</html>]]></response>
    <comment></comment>
  </item>
</items>
