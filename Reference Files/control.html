<?xml version="1.1"?>
<!-- NOTE: Any NULL bytes in requests and responses are preserved within this output, even though this strictly breaks the XML syntax. If your XML parser rejects the NULL bytes then you will need to remove or replace these bytes before parsing. Alternatively, you can use the option to base64-encode requests and responses. -->
<!DOCTYPE items [
<!ELEMENT items (item*)>
<!ATTLIST items burpVersion CDATA "">
<!ATTLIST items exportTime CDATA "">
<!ELEMENT item (time, url, host, port, protocol, method, path, extension, request, status, responselength, mimetype, response, comment)>
<!ELEMENT time (#PCDATA)>
<!ELEMENT url (#PCDATA)>
<!ELEMENT host (#PCDATA)>
<!ATTLIST host ip CDATA "">
<!ELEMENT port (#PCDATA)>
<!ELEMENT protocol (#PCDATA)>
<!ELEMENT method (#PCDATA)>
<!ELEMENT path (#PCDATA)>
<!ELEMENT extension (#PCDATA)>
<!ELEMENT request (#PCDATA)>
<!ATTLIST request base64 (true|false) "false">
<!ELEMENT status (#PCDATA)>
<!ELEMENT responselength (#PCDATA)>
<!ELEMENT mimetype (#PCDATA)>
<!ELEMENT response (#PCDATA)>
<!ATTLIST response base64 (true|false) "false">
<!ELEMENT comment (#PCDATA)>
]>
<items burpVersion="2025.6.5" exportTime="Tue Jul 22 10:31:55 IDT 2025">
  <item>
    <time>Tue Jul 22 10:25:17 IDT 2025</time>
    <url><![CDATA[http://192.168.0.9/control.html]]></url>
    <host ip="192.168.0.9">192.168.0.9</host>
    <port>80</port>
    <protocol>http</protocol>
    <method><![CDATA[GET]]></method>
    <path><![CDATA[/control.html]]></path>
    <extension>html</extension>
    <request base64="false"><![CDATA[GET /control.html HTTP/1.1
Host: 192.168.0.9
Accept-Language: en-US,en;q=0.9
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36
Sec-Purpose: prefetch;prerender
Purpose: prefetch
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Referer: http://192.168.0.9/
Accept-Encoding: gzip, deflate, br
Connection: keep-alive

]]></request>
    <status>200</status>
    <responselength>15978</responselength>
    <mimetype>HTML</mimetype>
    <response base64="false"><![CDATA[HTTP/1.1 200 OK
Content-Length: 15817
Content-Type: text/html
Content-Disposition: inline; filename="control.html"
Connection: close
Accept-Ranges: none

<!DOCTYPE html>
<!-- <html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"> -->
<head>
<meta charset="UTF-8">

<title>BBQ Controller</title>

<link rel="stylesheet" type="text/css" href="style.css">
<link rel="stylesheet" type="text/css" href="jquery-ui.css">

<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="jquery-ui.js"></script>
<script type="text/javascript" src="libtools.js"></script>
<script type="text/javascript" src="control.js"></script>
<script type="text/javascript">

$(document).ready(function(){
	//console.log("Flashing login button doesn't work");
	//flashElement("#btnLogin", ON);
	scanPostStatsAbpInput();
	setPelletsLevel(50);
	
	$("#statsControl").change(function(event) {	

		event.preventDefault();
	});
	
		
	$("#btnFillPellets").click(function(event){	  
			showRefillDialog();
	  	event.preventDefault();
  });
	
	
	$("#isPostStatsAbp").change(function(event) {
		if (!($('#isPostStatsAbp').is(':checked'))){
			alert("Disabling Post Stats will break the Sensor Data, " +
				  "Cooking Status and graph.  Disable ONLY if you have " +
				  "a poor network connection.");
		}	
		scanPostStatsAbpInput();
		flashElement("#btnSubmit",ON);
		event.preventDefault();
	});
	
	$("#isManualAuger").change(function(event) {
		if ($('#isManualAuger').is(':checked')){
			if (bbqState > BBQ_OFF){
				alert("Manual Auger Control is only available in BBQ State=OFF");
				$('#isManualAuger').prop("checked", false);
				flashElement("#btnSubmit",OFF);
			} else {
				flashElement("#btnSubmit",ON);
			}			
		}				
		event.preventDefault();
	});
	
	$("#isManualFan").change(function(event) {
		if ($('#isManualFan').is(':checked')){
			if (bbqState > BBQ_OFF){
				alert("Manual Fan Control is only available in BBQ State=OFF");
				$('#isManualFan').prop("checked", false);
				flashElement("#btnSubmit",OFF);
			} else {
				flashElement("#btnSubmit",ON);
			}			
		}				
		event.preventDefault();
	});
	
	$("#postRate").change(function(event) {	
		scanPostStatsAbpInput();
		flashElement("#btnSubmit",ON);
		event.preventDefault();
	});
	
	$("#cbStatus").change(function(event) {	
			scanDebugStatus();
			event.preventDefault();
	});
		
	
	$("#isProbeCook").change(function(event) {
		scanProbeCook();
		$("#btnSaveRecipe").val("Save");
		flashElement("#btnSubmit",ON);
		event.preventDefault();
	});
	
	$("#CookByProbeNumber").change(function(event) {
		scanProbeCook();
		$("#btnSaveRecipe").val("Save");
		flashElement("#btnSubmit",ON);
		event.preventDefault();
	});
	
	 $("#selTargetProbeTemp").change(function(event){
			scanProbeCook();
			$("#btnSaveRecipe").val("Save");
		  event.preventDefault();
		});
	 
	$("#targetProbeTemp").change(function(event){
		$("#selTargetProbeTemp").val('0').prop('selected', true);
		event.preventDefault();
	});
	
	
	$(".inputBox").on('input',function(event) {
		$("#btnSaveRecipe").val("Save");
		flashElement("#btnSubmit",ON);
		event.preventDefault();
	});

	
	$(".profileBox").on('input',function(event) {
		$("#btnSaveRecipe").val("Save");
		flashElement("#btnSubmit",ON);
		event.preventDefault();
	});
	
	$(":radio").on('change',function(event) {
		$("#btnSaveRecipe").val("Save");
		flashElement("#btnSubmit",ON);
		event.preventDefault();
	});

	$(":checkbox").on('change',function(event) {
		$("#btnSaveRecipe").val("Save");
		scanProfiles();
		flashElement("#btnSubmit",ON);
		event.preventDefault();
	});
	
	$("#recipeRating").change(function(event) {	
		$("#btnSaveRecipe").val("Save");
		event.preventDefault();
	});
	
  $("#btnOn").click(function(event){	  
	  //$("#bbqState").css("color","green").text("ON");
	  if (deviceState == DEV_READY){
		  setBbqMode(ON);
		  log("Turned BBQ ON! ");
	  } else {
		  alert("Device state is not READY");
	  } 
	  	event.preventDefault();
  });
  
  $("#btnOff").click(function(event){
	  //$("#bbqState").css("color","grey").text("OFF");
	  if (deviceState == DEV_READY){
		  setBbqMode(OFF);
		  log("Turned BBQ OFF! ");
	  } else {
		  alert("Device state is not READY");
	  }   
	  	event.preventDefault();
	  });
		
  $("#btnSubmit").click(function(event){
	  submitSettings();
	  flashElement("#btnSubmit",OFF);
	  //$("#btnSaveRecipe").val("Delete");
		event.preventDefault();
	  });
  
  $("#btnLogin").click(function(event){
		login();
	  event.preventDefault();
			
	});
  
  $("#selRecipe").change(function(event){
	  loadRecipe();
	  event.preventDefault();
	});
	
  
  $("#btnSaveRecipe").click(function(event){
	  var currentValue = $("#btnSaveRecipe").val();
	  if (currentValue === "Delete"){
		  deleteRecipe();
	  } else {
		  saveRecipe();
		  $("#btnSaveRecipe").val("Delete");
	  }
	  
		event.preventDefault();
	  });
  
});  //End of document.ready

</script>


</head>
<body onload="init()">
	<!--send first heading-->
	<p class="title">BBQ Controller	
		<svg id="wifiStatusBars" width="60" height="50" style='float: right;'>
			<rect id='wifiBar1' x="7"  y="35" width="10" height="5" fill="lightgrey" stroke="black" />
			<rect id='wifiBar2' x="17" y="30" width="10" height="10" fill="lightgrey"stroke="black" />
			<rect id='wifiBar3' x="27" y="25" width="10" height="15" fill="lightgrey" stroke="black" />
			<rect id='wifiBar4' x="37" y="20" width="10" height="20" fill="lightgrey" stroke="black" />
			<rect id='wifiBar5' x="47" y="15" width="10" height="25" fill="lightgrey" stroke="black" />			
			<text x="20" y="50" class="small" fill="blue">Wi-Fi</text>
			<text x="0" y="22" class="small" fill="blue">2.4GHz</text>
		</svg>
	</p>
	<hr>
	<hr>
	<!-- ====================================================================================================== -->
	<!-- ---------------------- Sensor and Cooking Status---------------------------- -->
	<form id=sensorStatus>
	<p class="heading1">Cooking Status</p>
	<table border=1>
		<tr>
			<td class="status">Current Profile</td>
			<td class="status">Time Remaining (m)</td>
			<td class="status" id='scale'>Target Chamber Temp &#0176;F</td>
			<td class="status" id='scale'>Chamber Temp &#0176;F</td>
		</tr>
		<tr>
			<td class="status" id='currentProfile' data-value='-1' >N/A </td>
			<td class="status" id='timeRemaining' data-value='0' >0</td>
			<td class="status" id='targetTemp' data-value='0'>0</td>
			<td class="status" id='chamberTemp' data-value='70'>70</td>
			</tr>
		</table>
		<br>
		<p class="heading1">Cook State</p>
		<table border=1>
			<tr>
				<td class="status">Cook By Probe #</td>
				<td class="status" id='scale'>Cook By Probe Target Temp &#0176;F</td>
				<td class="status">BBQ State</td>
				<td class="status">DC ON</td>
  			<td class="status">DC OFF</td>
				<td class="status">Fan Speed %</td>
							
			</tr>
				<tr>
					<td class="status" id='statusCookByProbeNumber' data-value='0'>0</td>
					<td class="status" id='statusTargetProbeTemp' data-value='0'>0</td>
					<td class="status" id='bbqState' data-value='-1' >N/A</td>
					<td class="status" id='dcOn' data-value='30' >30</td>
					<td class="status" id='dcOff' data-value='30' >30</td>
					<td class="status" id='statusFanSpeed' data-value='0' >0</td>					
			</tr>
		</table>
		<br>
		<p class="heading1">Probes Data</p>
		<table border=1>
			<tr>								
				<td class="status" id='scale'>Probe #1 Temp &#0176;F</td>
				<td class="status" id='scale'>Probe #2 Temp &#0176;F</td>
				<td class="status" id='scale'>Probe #3 Temp &#0176;F</td>
				<td class="status" id='scale'>Outside Temp &#0176;F</td>
			</tr>
				<tr>						
				<td class="status" id='probeTemp1' data-value='0'>0</td>
				<td class="status" id='probeTemp2' data-value='0'>0</td>
				<td class="status" id='probeTemp3' data-value='0'>0</td>
				<td class="status" id='OutsideTemp' data-value='0'>0</td>
			</tr>
		</table>
		<br>
		<hr />
		<p class="heading1">Pellet Hopper</p><br>
		<table border=1>
			<tr>								
				<td class="status">Refill Pellet Hopper</td>
				<td class="status">E | 10% | 20% | 30% | 40% | 50% | 60% | 70% | 80% | 90% | F</td>
			</tr>
			<tr>								
				<td class="status"><input class="btn" id="btnFillPellets" type="submit" value='Fill' ></td>
				<td class="status"><div id="PelletsLevel"></div></td>
			</tr>
		</table>	
	</form>
  <br><br>
  <!-- ----------------Cooking Profiles Management--------------------------  -->
  <form id='cookingProfiles'>
  <hr />
  <p class="heading1">Cook Settings</p>
  <br>
  <p class="heading2">Profile 1</p>
  <table class="profiles">
  <tr>
  <td>Target Chamber Temp</td><td><input class="profileBox" type='text' value=0 id='targetTemp1'><span id='scale'>&#0176;F</span></td>
  </tr>
  <tr>
  <td>Cook Time (m)</td><td><input class="profileBox" type='text' value=0 id='cookTime1'></td>
  <td><input type='checkbox' id='holdTemp1' >Hold - Uncheck to enable Profiles 2-4</td>
  </tr>
  </table>
  <br>
  <p class="heading2">Profile 2</p>
  <table class="profiles">
		<tr>
		<td>Target Chamber Temp</td><td><input class="profileBox" type='text' value=0 id='targetTemp2'><span id='scale'>&#0176;F</span></td>
		</tr>
		<tr>
		<td>Cook Time (m)</td><td><input class="profileBox" type='text' value=0 id='cookTime2'></td>
		<td><input type='checkbox' id='holdTemp2' >Hold</td>
		</tr>
  </table>
  <br>
  <p class="heading2">Profile 3</p>
  <table class="profiles">
		<tr>
		<td>Target Chamber Temp</td><td><input class="profileBox" type='text' value=0  id='targetTemp3'><span id='scale'>&#0176;F</span></td>
		</tr>
		<tr>
		<td>Cook Time (m)</td><td><input class="profileBox" type='text' value=0  id='cookTime3'></td>
		<td><input type='checkbox' id='holdTemp3' >Hold</td>
		</tr>
  </table>
  <br>
  <p class="heading2">Profile 4</p>
  <table class="profiles">
		<tr>
		<td>Target Chamber Temp</td><td><input class="profileBox" type='text' value=0 id='targetTemp4'><span id='scale'>&#0176;F</span></td>		
		</tr>
		<tr>
		<td>Cook Time (m)</td><td><input class="profileBox" type='text' value=0 id='cookTime4'></td>
		<td><input type='checkbox' id='holdTemp4'>Hold</td>
		</tr>
  </table>
  <br>
  </form>
  <!-- ------------------------Smoke Control  -------------------------- -->
  <form id='smokeControl'>
	  <p class="heading2">Smoke Control</p>
	  <br>
	  <p>
		<input type='radio' name='smokeProfile' value='0'>Precision Cook
		<input type='radio' name='smokeProfile' value='1' checked>Minimum Smoke
		<input type='radio' name='smokeProfile' value='2' >Medium Smoke
		<input type='radio' name='smokeProfile' value='3' >Maximum Smoke
		</p>
		<br>

	  <br>
  </form>
  <!-- ------------------------Ending Control  -------------------------- -->
  <form id='endingControl'>
  	<p class="heading2">Ending Control</p>
  	<br>
  	<p id='probeCook'>
  		<input type='checkbox' id="isProbeCook">--Cook By Probe--   
			<select class="selectBox" id="CookByProbeNumber">
					<option  value='0' selected='selected' >None</option>
					<option  value='1'>Probe #1</option>
					<option  value='2'>Probe #2</option>
					<option  value='3'>Probe #3</option>
			</select>
		  <select class="selectBox" id="selTargetProbeTemp">
					<option  value='0'>Custom</option>
					<option  value='1' selected='selected' >Pork</option>
					<option  value='2'>Beef</option>
					<option  value='3'>Seafood</option>
					<option  value='4'>Veal and Lamb</option>
					<option  value='5'>Ground Meats</option>
					<option  value='6'>Poultry</option>
			</select>
			<input class="profileBox" type='text' id='targetProbeTemp' value=0 ><span  id='scale'>&#0176;F</span>
			<input class="profileBox" type='text' id='restTime' value=3 ><span>Rest Minutes</span>
		</p>
		<br>
		<br>
	  <p>
			<input type='radio' name='bSmoke' value='1'>Smoke When Done
			<input type='radio' name='bSmoke' value='0' checked>Turn Off When Done
		</p>
	  <br>
  </form>
	
	<!----------------------------Recipe Management --------------------->
  <form id=fileManagement>
	  <hr />
		<p class="heading1">Recipes</p>
		<br>
	  <select class="selectBox" id=selRecipe>
			<option  value="1">Default</option>
		</select>
	  <span> -Recipe- <input class="inputBox" type="text" id="recipeName" value="Default" maxlength="10">
	  <select class="ratingBox" id="recipeRating">
			<option  value="1">&#9829;&#9674;&#9674;&#9674;&#9674;</option>
			<option  value="2">&#9829;&#9829;&#9674;&#9674;&#9674;</option>
			<option  value="3">&#9829;&#9829;&#9829;&#9674;&#9674;</option>
			<option  value="4">&#9829;&#9829;&#9829;&#9829;&#9674;</option>
			<option  value="5">&#9829;&#9829;&#9829;&#9829;&#9829;</option>
		</select>
	  <input class="btn" id="btnSaveRecipe" type="submit" value='Delete' ></span>
		</p>
	  <br>
  </form>
	<!-- ----------------Controls Management--------------------------  -->
  
	<form id='manualControls'>
		<hr />
		<p class="heading1">Control</p>
		<br>
		<p class="heading2">Fan Speed</p>
		<br>
		<table class="profiles">
			<tr>
			<td>Run Fan At:</td>
			<td>
				<select class="profileDropdown" id="fanSpeed">
					<option  value='0' selected='selected' >Auto</option>
					<option  value='10'>10%</option>
					<option  value='20'>20%</option>
					<option  value='40'>40%</option>
					<option  value='60'>60%</option>
					<option  value='80'>80%</option>
					<option  value='100'>100%</option>
					
				</select>
			</td>
			</tr>
		</table>
		<br>
	  <p class="heading2">Manual Run</p>
		<br>
		<p id='manualFan'>
			Fan Override <input type='checkbox' id='isManualFan'>Turn Fan On</td>
		</p>
		<br>
		<p id='manualAuger'>
			Auger Override<input type='checkbox' id='isManualAuger'>Turn Auger On</td>
		</p>
		<br>
		<p id='manualPHV'>
			Pellet Hopper Vibrator Override<input type='checkbox' id='isManualPHV'>Turn PHV On</td>
		</p>
		<br>
		<br>
	</form>
	
  <!----------------------------Stats and Debug Control --------------------->
  <form id="statsControl">
		<p class="heading2">Stats Control</p><br>
		<p><input type='checkbox' id="cbStatus" >Show Debug Console</p><br>
		<p><input type='checkbox' id="isPostStatsAbp" checked >Post Stats ..... 
			Post rate (s): <input class="profileBox" type='text' value='7' id='postRate'></p>
		<br>
  </form>
  
  <!-- -----------------------------Authentication and Device Management ----------------- -->
	<form id=deviceAuthentication>
	  <p><button class="btn" id="btnLogin">Login</button>
	  <span> UserName: <input class="inputBox" type="text" id="userName" value="muxall" disabled></span>
	  <span> Password: <input class="inputBox" type="password" id="userPassword" 
		autocomplete="current-password">
	  </span></p>
	</form>
  <!-------------------- Device State and control------------------------------- -->
  <br>
	<form id=deviceControl>		
		<p>
		<button class="btn" id="btnSubmit" style='width:100px;'>Enter/Save</button> Submit Changes
		</p>
		<br>
		<br>
	  <p class="heading2">Client State: <span id=clientState class="off"> OFFLINE</span></p>
		<br>
	  <p class="heading2">Device State: <span id=deviceState data-value='0' class="off">N/A</span></p>
	  <br>
	  <button class="btn" id="btnOn" >Start</button>		
	  <button class="btn" id="btnOff" style='float: right;'>Stop</button>
	  <br>
  	</form>
  <hr><hr>
  <!-- ====================================================================================================== -->  	
  <!--BBQ Console for Debug  -->
  <form id=debugConsole>
	  <textarea id="console" rows='10' cols='70' >
	  </textarea>
  </form>
</body>

</html>]]></response>
    <comment></comment>
  </item>
</items>
